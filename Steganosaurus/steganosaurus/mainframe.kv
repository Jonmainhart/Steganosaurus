#:kivy 2.1.0
# -------------------------------------
#Steganosaurus
    
# Linden Crandall
# Jonthan Mainhart
# Zhihua Zheng

# Final Project for CMSC 495.

# April 12, 2022

# MainFrame Template for Steganosaurus.
# -------------------------------------
#: import Factory kivy.factory.Factory
#: import utils kivy.utils

<MainWidget>:
    rows: 4
    padding: 50
    spacing: 20
    BoxLayout:
        orientation: "horizontal"
        pos_hint: {'x': 1}
        Image:
            source: root.display_image.filename
            size_hint: None, None
            size: root.width*0.6, root.height*0.6
            pos_hint: {'top': 1.15}
            allow_stretch: True
        BoxLayout:
            orientation: "vertical"
            padding: 50
            spacing: 30
            pos_hint: {'top': .9}
            RoundedCornerButton:
                id: "temporary_btn_id1"
                size_hint: None, None
                size: 230, 90
                text: "Open Image"
                on_release: root.on_open_button_click() # TODO
                #on_release: Factory.WarningPopup().open()
            RoundedCornerButton:
                id: "temporary_btn_id2"
                size_hint: None, None
                size: 230, 90
                text: "Warning Dialog"
                on_release: root.popup_user_notification(self,'') # TODO
                #on_release: Factory.InfoAndErrorPopup().open()
            RoundedCornerButton:
                id: "temporary_btn_id3"
                size_hint: None, None
                size: 230, 90
                text: "Info/Error Dialog"
                #text: "Save Image"
                on_release: root.popup_user_notification(self, '') # TODO
                #on_release: root.on_save_button_click() # TODO
                #on_release: Factory.WarningPopup().open()
            RoundedCornerButton:
                id: "temporary_btn_id4"
                size_hint: None, None
                size: 230, 90
                text: "Reset Image"
                disabled: root.reset_btn_disabled
                on_release: root.on_reset_button_click() # TODO
                #on_release: Factory.InfoAndErrorPopup().open()
    MessageLabel: #DialogNotificationLabel
        text: root.user_notification_msg
        size_hint: 1, .1
        text_size: self.width, None
        font_size: 30
        color: (1,0,0,1)
    TextInput:
        id: encode_text_input
        size_hint: 1, .65
        text: root.textfield_str
        hint_text: "Enter scecret message here" # Place holder
        multiline: False
        on_text_validate:  root.on_text_validate(self)  # When press enterm
    AnchorLayout:  
        anchor_x: 'right'
        anchor_y: 'center'
        size_hint: .1, .07
        Label:
            text: "(" + str(len(encode_text_input.text)) + "/" + root.maximum_char_count +")"
            text_size: self.width, None
            size_hint: None, .1

<WarningPopup@Popup>:
    id: warning_dialog
    auto_dismiss: False
    title: "contents (%s)"%(app.message_type) # Display Message Type
    size_hint: .6, .6
    WarningDialog:

<InfoAndErrorPopup@Popup>:
    id: info_error_dialog
    auto_dismiss: False
    title: "contents (%s)"%(app.message_type) # Display Message Type
    size_hint: .6, .6
    InfoAndErrorDialog:

<RoundedCornerButton@Button>:
    background_disabled_normal: "black"
    background_color: (0,0,0,0)
    background_normal: "white"
    color: 1, 1, 1, 1 # Text color
    customized_color: (76/255, 175/255, 80/255, 1)
    bold: True
    # Change button background color, on press
    on_press: root.customized_color = utils.get_color_from_hex('#3e8e41')
    canvas.before:
        Color:
            rgba: self.customized_color
        RoundedRectangle:
            size: self.size
            pos: self.pos
            radius: [25]

<MessageLabel@Label>:
    background_color: (0,0,0,0)
    background_normal: "white"
    canvas.before:
        Color:
            rgba: self.background_color
        RoundedRectangle:
            size: self.size
            pos: self.pos